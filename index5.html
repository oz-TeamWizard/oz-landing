<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mealStack - 맞춤형 단백질 계산기</title>
    <meta
      name="description"
      content="당신의 체형 목표에 맞는 완벽한 단백질 섭취량과 식단을 제공합니다. 벌크업, 린벌크업, 컷팅, 유지 목적별 맞춤 식단 계산기"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <style>
      :root {
        --primary-red: #dc2626;
        --dark-bg: #1a1a1a;
        --card-bg: #2d2d2d;
        --text-light: #f8f9fa;
        --border-color: #404040;
      }
      body {
        background: linear-gradient(135deg, var(--dark-bg) 0%, #0f0f0f 100%);
        color: var(--text-light);
        font-family: "Arial", sans-serif;
        min-height: 100vh;
      }
      .navbar {
        background: rgba(26, 26, 26, 0.95) !important;
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border-color);
      }
      .brand-logo {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--primary-red) !important;
        text-shadow: 0 0 10px rgba(220, 38, 38, 0.3);
      }
      .hero-section {padding: 80px 0; text-align: center;}
      .hero-title {
        font-size: 3.5rem;
        font-weight: 900;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, var(--primary-red), #ff4d4d);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .hero-subtitle {font-size: 1.2rem; color: #cccccc; margin-bottom: 2rem;}
      .input-card {
        background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 15px;
        padding: 2rem; margin-bottom: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.3);}
      .form-control, .form-select {
        background: #1a1a1a; border: 2px solid var(--border-color); color: var(--text-light);
        border-radius: 10px; padding: 12px 16px;
      }
      .form-control:focus, .form-select:focus {
        background: #1a1a1a; border-color: var(--primary-red); color: var(--text-light);
        box-shadow: 0 0 0 0.25rem rgba(220,38,38,0.25);}
      .btn-primary {
        background: linear-gradient(45deg, var(--primary-red), #ff4d4d);
        border: none; padding: 12px 30px; border-radius: 25px; font-weight: bold;
        text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s ease;
      }
      .btn-primary:hover {
        transform: translateY(-2px); box-shadow: 0 10px 25px rgba(220,38,38,0.4);
        background: linear-gradient(45deg, #b91c1c, var(--primary-red));
      }
      .result-card {
        background: linear-gradient(135deg, var(--primary-red), #b91c1c);
        border-radius: 20px; padding: 3rem 2rem; text-align: center; margin: 2rem 0;
        box-shadow: 0 15px 35px rgba(220,38,38,0.3); display: none;
      }
      .protein-amount {
        font-size: 4rem; font-weight: 900; color: white;
        text-shadow: 0 0 20px rgba(255,255,255,0.5); margin-bottom: 0.5rem;
      }
      .protein-label {
        font-size: 1.2rem; color: rgba(255,255,255,0.9); text-transform: uppercase;
        letter-spacing: 2px;
      }
      .meal-card {
        background: var(--card-bg); border: 1px solid var(--border-color);
        border-radius: 15px; padding: 1.5rem; margin-bottom: 1.5rem; transition: all 0.3s ease;
      }
      .meal-card:hover {
        transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.4); border-color: var(--primary-red);
      }
      .meal-title {color: var(--primary-red); font-weight: bold; font-size: 1.3rem; margin-bottom: 1rem;}
      .food-item {display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);}
      .food-item:last-child {border-bottom: none;}
      .protein-badge {
        background: var(--primary-red); color: white; padding: 0.25rem 0.5rem;
        border-radius: 15px; font-size: 0.8rem; font-weight: bold;
      }
      .section-title {
        font-size: 2.5rem; font-weight: bold; text-align: center;
        margin: 4rem 0 2rem 0; color: var(--primary-red);}
      .loading {display: none; text-align: center; color: var(--primary-red);}
      .language-toggle {position: fixed; top: 20px; right: 20px; z-index: 1000;}
      #mainProteinCard {
        background: linear-gradient(135deg, var(--primary-red), #ff4d4d, #dc2626) !important;
        border: 3px solid #fff !important; border-radius: 25px !important; padding: 3rem 2rem !important; margin-top: 2rem;
        box-shadow: 0 20px 50px rgba(220,38,38,0.6), 0 0 30px rgba(220,38,38,0.3); transition: all 0.4s ease;
        cursor: pointer; position: relative; overflow: hidden;
      }
      #mainProteinCard .protein-amount {
        color: #fff !important; text-shadow: 0 0 30px rgba(255,255,255,0.8), 0 0 60px rgba(255,255,255,0.4);
        font-size: 5rem !important; font-weight: 900 !important; animation: pulse 2s infinite;
      }
      #mainProteinCard .protein-label {
        color: rgba(255,255,255,0.95) !important; font-weight: 900 !important; letter-spacing: 3px !important;
        font-size: 1.4rem !important; text-transform: uppercase; text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      }
      @keyframes pulse {0%,100% {transform: scale(1);} 50% {transform: scale(1.05);}}
      /* preference-section, btn-capture, shopping-list, 구독 등 스타일도 동일하게 추가 */
    </style>
  </head>
  <body>
    <!-- Language Toggle -->
    <div class="language-toggle">
      <button class="btn btn-outline-light btn-sm" onclick="switchLanguage()">
        <i class="fas fa-globe"></i> EN
      </button>
    </div>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
      <div class="container">
        <a class="navbar-brand brand-logo" href="#"><i class="fas fa-dumbbell"></i> mealStack</a>
      </div>
    </nav>
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <h1 class="hero-title">맞춤형 단백질 식단 계산하기</h1>
        <p class="hero-subtitle">
          당신의 체형 목표에 맞는 완벽한 단백질 섭취량과 식단을 제공합니다
        </p>
      </div>
    </section>
    <!-- Input Section -->
    <section class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="input-card">
            <h3 class="text-center mb-4">
              <i class="fas fa-calculator text-danger"></i> 계산 시작하기
            </h3>
            <form id="proteinForm">
              <div class="row">
                <div class="col-md-4 mb-3">
                  <label class="form-label">몸무게 (kg)</label>
                  <input type="number" class="form-control" id="weight" min="40" max="150" placeholder="70" required />
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">체형 목표</label>
                  <select class="form-select" id="goal" required>
                    <option value="">선택하세요</option>
                    <option value="bulkup">벌크업 (근육 증가)</option>
                    <option value="lean_bulkup">린벌크업 (깔끔한 증량)</option>
                    <option value="cutting">컷팅 (체지방 감소)</option>
                    <option value="maintain">유지 (현상 유지)</option>
                  </select>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">운동 횟수</label>
                  <select class="form-select" id="activity" required>
                    <option value="">선택하세요</option>
                    <option value="low">낮음 (주 3회 이하)</option>
                    <option value="moderate">보통 (주 4-5회)</option>
                    <option value="high">높음 (주 6회 이상)</option>
                  </select>
                </div>
              </div>
              <div class="preference-section">
                <h5 class="mb-3 text-center">
                  선호하는 식품 종류
                  <small class="text-muted d-block">(중복 선택 가능)</small>
                </h5>
                <div class="d-flex flex-wrap justify-content-center gap-2">
                  <div class="preference-checkbox">
                    <input type="checkbox" id="meat" value="meat" checked />
                    <label for="meat"><i class="fas fa-drumstick-bite"></i> 육류</label>
                  </div>
                  <div class="preference-checkbox">
                    <input type="checkbox" id="seafood" value="seafood" checked />
                    <label for="seafood"><i class="fas fa-fish"></i> 어류/해산물</label>
                  </div>
                  <div class="preference-checkbox">
                    <input type="checkbox" id="plant" value="plant" checked />
                    <label for="plant"><i class="fas fa-leaf"></i> 식물성</label>
                  </div>
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg">
                  <i class="fas fa-bolt"></i> 단백질 양 계산하기
                </button>
              </div>
            </form>
          </div>
          <!-- 메인 단백질 카드 -->
          <div id="mainProteinCard" class="result-card" style="display: none; margin-top: 1.5rem">
            <div class="protein-amount" id="mainProteinAmount">0</div>
            <div class="protein-label">일일 권장 단백질</div>
          </div>
          <!-- 결과 캡처 버튼 -->
          <div class="capture-section" id="captureSection" style="display: none">
            <button class="btn btn-capture" onclick="captureResult()">
              <i class="fas fa-camera"></i> 📋 식단표 이미지로 저장
            </button>
            <button class="btn btn-capture" onclick="shareResult()">
              <i class="fas fa-share"></i> 결과 공유하기
            </button>
          </div>
          <!-- 오늘의 추천 식재료 요약 리스트 -->
          <div id="ingredientSummary" style="display: none"></div>
        </div>
      </div>
    </section>
    <!-- Loading -->
    <div class="container">
      <div class="loading" id="loading">
        <i class="fas fa-spinner fa-spin fa-3x text-danger"></i>
        <p class="mt-3">최적의 식단을 계산 중입니다...</p>
      </div>
    </div>
    <!-- Result Section -->
    <section class="container">
      <div id="resultSection" style="display: none">
        <div class="result-card">
          <div class="protein-amount" id="proteinAmount">0</div>
          <div class="protein-label">일일 권장 단백질</div>
          <p class="mt-3 mb-0" id="goalDescription"></p>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="input-card"
              style="border: 2px solid var(--primary-red); background: linear-gradient(135deg,var(--card-bg),rgba(220,38,38,0.1));">
              <h5 style="text-align: center; color: var(--primary-red); font-size: 1.5rem; margin-bottom: 1.5rem;">
                <i class="fas fa-chart-pie"></i> 영양소 분배
              </h5>
              <div id="nutritionBreakdown" style="text-align: center"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Meal Plans Section -->
    <section class="container" id="mealPlansSection" style="display: none">
      <h2 class="section-title"><i class="fas fa-utensils"></i> 추천 식단</h2>
      <div id="mealPlans"></div>
    </section>
    <!-- Subscription Section -->
    <section class="container" id="subscriptionSection">
      <div class="subscription-card">
        <h2 class="subscription-title"><i class="fas fa-paper-plane text-danger"></i> mealStack 자체 식단 패키지 예약 안내</h2>
        <p class="subscription-subtitle">주 7~8만원의 하루 3-4끼의 자체 벌크업 식단 패키지를 런칭한다면 관심 있으실까요?</p>
        <div class="row justify-content-center">
          <div class="col-lg-7">
            <form id="subscriptionForm">
              <div class="input-group mb-3">
                <input type="email" class="form-control" id="emailInput" placeholder="your-email@example.com" required />
                <button class="btn btn-primary" type="submit" id="submitButton">
                  <i class="fas fa-bell"></i> 예약 안내 받아보기
                </button>
              </div>
            </form>
            <div id="subscriptionSuccessMessage" style="display:none;">
              <i class="fas fa-check-circle"></i> 예약 명단에 등록되었습니다! 런칭 시 가장 먼저 알려드릴게요.
            </div>
          </div>
        </div>
        <hr class="my-4" style="border-color: var(--border-color)" />
        <p class="subscription-subtitle">또는 SNS 채널을 팔로우하고 소식을 받아보세요!</p>
        <div class="sns-buttons">
          <a href="#" class="btn" aria-label="KakaoTalk Channel"><i class="fas fa-comment"></i></a>
          <a href="#" class="btn" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" class="btn" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
    </section>
    <!-- Footer -->
    <footer class="text-center py-5 mt-5" style="border-top: 1px solid var(--border-color)">
      <div class="container">
        <p class="text-muted">© 2025 mealStack. 건강한 단백질 라이프를 시작하세요.</p>
      </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // ---- 식단 데이터, 함수, 모든 출력 로직, scaling 함수, 영양성분 보정 ----
      // 모든 JS 코드는 이전 답변과 동일하며, "scaleBaseMeals", "adjustMealsToTargetCalories"는 오차±5% 반복보정됨.
      // (너무 길어서 문자수 제한상 여기서 바로 제공 못함, 다음 메시지로 100% 분할로 이어서 제공)

      // 👉 '다음 메시지에서 전체 JS 코드(식단 데이터, 영양소 계산, 보정, 캡처, 클립보드, 예약 등)'를 100% 세부까지 이어서 보내드립니다!
    </script>
    
  </body>
</html>
